{% extends 'layout.html' %}

{% block title %}Login{% endblock %}

{% block head %} {% endblock %}

{% block content %}
    <div class="mx-auto bg-light p-3" style="width: 400px;">
        <div class="row">
            <h1 class="text-center">Register</h1>
        </div>

        <div class="row mx-0">
            <div class="col-3  text-center">
                <a class="text-decoration-none text-secondary" href="{{ url_for('login') }}"> <b>Login</b></a>
            </div>
            <div class="col-3 border-bottom border-3 border-primary pb-2 text-center">
                <a class="text-decoration-none" href="{{ url_for('register') }}"><b>Register</b></a>
            </div>
        </div>
        <form class="" action="{{ url_for('register') }}" method="post" enctype="multipart/form-data">
            <div class="input-group my-2">
                <span class="input-group-text bg-primary" id="basic-addon1">
                    <i class="fas fa-user text-white"></i>
                </span>
                <input type="text" class="form-control" name="username" placeholder="Username" id="username" required>
            </div>
            <div class="text-center text-danger my-3">{{ msg["username_msg"] }}</div>

            <div class="input-group my-2">
                <span class="input-group-text bg-primary" id="basic-addon1">
                    <i class="fas fa-user text-white"></i>
                </span>
                <input type="text" class="form-control" name="name" placeholder="Name" id="name" required>
            </div>
            <div class="text-center text-danger my-3">{{ msg["name_msg"] }}</div>

            <div class="input-group my-3">
                <span class="input-group-text bg-primary" id="basic-addon1">
                    <i class="fas fa-envelope text-white"></i>
                </span>
                <input type="text" class="form-control" name="email" placeholder="Email" id="email" required>
            </div>

            <div class="text-center text-danger my-3">{{ msg["email_msg"] }}</div>

            <div class="input-group my-3">
                <span class="input-group-text bg-primary" id="basic-addon1">
                    <i class="fas fa-address-card text-white"></i>
                </span>
                <input type="text" class="form-control" name="address" placeholder="Address" id="address" required>
            </div>

            <div class="input-group my-3">
                <span class="input-group-text bg-primary" id="basic-addon1">
                    <i class="fas fa-lock text-white"></i>
                </span>
                <input class="form-control" type="password" name="password" placeholder="Password" id="password" required>
            </div>

            <div class="input-group my-3">
                <span class="input-group-text bg-primary" id="basic-addon1">
                    <i class="fas fa-lock text-white"></i>
                </span>
                <input class="form-control" type="password" name="confirm-password" placeholder="Confirm Password" id="confirm-password" required>
            </div>

            <div class="text-center text-danger my-3">{{ msg["password_msg"] }}</div>

            <div class="input-group my-3">
                <span class="input-group-text bg-primary" id="basic-addon1">
                    <i class="fas fa-image text-white"></i>
                </span>
                <input class=" file form-control" id="file" name="file" type="file" value="Select" accept="image/*" onchange="readURL(this);" required>
            </div>

            <div class="text-center">
                <img class="rounded img-thumbnail d-none" id="picture" src="#" />
            </div>
            <div class="text-center text-danger my-3">{{ msg["fill_msg"] }}</div>
            <div class="text-center text-danger my-3">{{ msg["image_msg"] }}</div>
            <div class="text-center text-success my-3">{{ msg["success_msg"] }}</div>
            <div class="text-center text-danger my-3">{{ msg["account_msg"] }}</div>

            <input type="submit" class="form-control fw-bold btn btn-primary" value="Register"></input>
        </form>

    </div>
    <script>

        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#picture')
                        .attr('src', e.target.result)
                        {#.width(200)#}
                        {#.height(200)#}
                        .removeClass("d-none");
                };

                reader.readAsDataURL(input.files[0]);
            }
        }

        var password = document.getElementById("password")
            , confirm_password = document.getElementById("confirm-password");

        function validatePassword(){
            if(password.value != confirm_password.value) {
                confirm_password.setCustomValidity("Passwords Don't Match");
            } else {
                confirm_password.setCustomValidity('');
            }
        }

        password.onchange = validatePassword;
        confirm_password.onkeyup = validatePassword;

    </script>
{% endblock %}